/**
 * @license
 * BSD 2-Clause License
 * 
 * Copyright (c) 2017, Fight for the Future
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 * 
 * * Redistributions of source code must retain the above copyright notice, this
 *   list of conditions and the following disclaimer.
 * 
 * * Redistributions in binary form must reproduce the above copyright notice,
 *   this list of conditions and the following disclaimer in the documentation
 *   and/or other materials provided with the distribution.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
 * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
 * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
 * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
 * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
 * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
"use strict";function Countdown(t){this.target=t.target,this.DOMNode=document.querySelector(this.target),this.DOMNode&&(this.date=t.date,this.interval=null,this.requestAnimationFrame=this.requestAnimationFrame.bind(this),this.tick=this.tick.bind(this),this.start())}Countdown.prototype.destroy=function(){this.stop(),delete this.date,delete this.tick},Countdown.prototype.pad=function(t){return t>9?t:"0"+t},Countdown.prototype.requestAnimationFrame=function(){(window.requestAnimationFrame||setTimeout)(this.tick)},Countdown.prototype.start=function(){this.stop(),this.requestAnimationFrame(),this.interval=setInterval(this.requestAnimationFrame,1e3)},Countdown.prototype.stop=function(){clearInterval(this.interval)},Countdown.prototype.tick=function(){var t=Date.now(),e=Math.max(0,this.date-t);this.render(e),0!==e||this.destroy()},Countdown.prototype.render=function(t){var e=Math.floor(t/864e5);t-=864e5*e;var n=Math.floor(t/36e5);t-=36e5*n;var o=Math.floor(t/6e4);t-=6e4*o;var s=Math.floor(t/1e3);t-=1e3*s,this.DOMNode.querySelector(".days").textContent=this.pad(e),this.DOMNode.querySelector(".hours").textContent=this.pad(n),this.DOMNode.querySelector(".minutes").textContent=this.pad(o),this.DOMNode.querySelector(".seconds").textContent=this.pad(s)},function(){function t(t){var e={dp:{code:"dp",name:"Demand Progress",url:"https://demandprogress.org/",donate:"https://secure.actblue.com/donate/nndayofaction?refcode=20170712-bftn"},fp:{code:"fp",name:"Free Press Action Fund",url:"https://www.freepress.net/",donate:"https://freepress.actionkit.com/donate/single/"},fftf:{code:"fftf",name:"Fight for the Future",url:"https://www.fightforthefuture.org/",donate:"https://donate.fightforthefuture.org/"}};return e.hasOwnProperty(t)?e[t]:e[function(){var t=Math.random();return t<.2?"fp":t<.6?"dp":"fftf"}()]}function e(t){var e;switch("string"==typeof t?t:""){case"money":e={className:t,logos:["images/money.png"],headline:"Please upgrade your plan to proceed.",body:"Well, not yet. But without net neutrality, cable companies could censor websites based on their content, or to favor their own business partners. Congress can stop them, but only if we flood them with calls right now."};break;case"stop":e={className:t,logos:["images/stop.png"],headline:"This site has been blocked by your ISP.",body:"Well, not yet. But without net neutrality, cable companies could censor websites, favoring their own business partners. We can stop them and keep the Internet open, fast, and awesome if we all contact the U.S. Congress and the FCC, but we only have a few days left."};break;case"slow":e={className:t,logos:["images/slow.svg"],headline:"Sorry, we're stuck in the slow lane.",body:"Well, not yet. But the FCC is about to vote to get rid of net neutrality, letting ISPs slow sites like this to a crawl and charge everyone extra fees. Congress can stop them, but only if we flood them with calls right now."};break;case"without":e={className:t,logos:["images/slow.svg","images/stop_gradient.png","images/money_gradient.png"],headline:"This is the web without net neutrality.",body:"The FCC is about to vote to get rid of net neutrality. Without it, sites like this could be censored, slowed down, or forced to charge extra fees. Congress can stop them, but only if we flood them with calls right now."};break;case"countdown":default:e={className:"countdown",logos:[],headline:"URGENT!",body:"The FCC is about to announce a vote on its plan to kill net neutrality. We have just days to stop censorship, throttling, and extra fees online. Congress needs to hear from Internet users like you right now."}}if("object"==typeof t)for(var n=Object.keys(t),o=0;o<n.length;o++)e[n[o]]=t[n[o]];return e}function n(t){document.body.classList.add(t.className);for(var e,n=document.createDocumentFragment(),o=0;o<t.logos.length;o++)(e=document.createElement("img")).setAttribute("src",t.logos[o]),n.appendChild(e);document.getElementById("logos").appendChild(n),document.getElementById("headline").textContent=t.headline;for(var s,i=document.createDocumentFragment(),a=t.body.split("\n"),o=0;o<a.length;o++)(s=document.createElement("p")).textContent=a[o],i.appendChild(s);var r=document.createElement("a");r.setAttribute("href","https://www.battleforthenet.com/#widget-learn-more"),r.setAttribute("target","_blank"),r.textContent="Learn more.",s.textContent+=" ",s.appendChild(r),document.getElementById("content").appendChild(i),"countdown"===t.className&&"function"==typeof Countdown&&new Countdown({target:"#countdown",date:this.options.date})}function o(){document.getElementById("close").addEventListener("mousedown",function(t){t.preventDefault(),s("stop")}),document.getElementById("background").addEventListener("mousedown",function(t){t.target==document.getElementById("background")&&s("stop")})}function s(t,e){e||(e={}),e.requestType=t,e.BFTN_IFRAME_MSG=!0,parent.postMessage(e,"*")}function i(){!function(t,e,n,o,s,i,a){t.GoogleAnalyticsObject=s,t[s]=t[s]||function(){(t[s].q=t[s].q||[]).push(arguments)},t[s].l=1*new Date,i=e.createElement(n),a=e.getElementsByTagName(n)[0],i.async=1,i.src="https://www.google-analytics.com/analytics.js",a.parentNode.insertBefore(i,a)}(window,document,"script",0,"ga"),"undefined"!=typeof ga&&(ga("create","UA-26576645-40","auto"),ga("send","pageview"))}var a,r=document.getElementById("loading"),d=document.getElementById("main"),l=document.getElementById("script"),c={main:{options:{debug:!1},init:function(c){function u(t){a&&clearTimeout(a),l&&l.classList.remove("invisible"),d&&d.classList.add("invisible"),r&&r.classList.add("hidden")}function h(){s("cookie",{name:"_BFTN_WIDGET_ACTION",val:"true",expires:this.options.actionCookieExpires})}function m(t){a&&clearTimeout(a),h.call(this),r&&(r.addEventListener("transitionend",u),r.classList.add("invisible")),a=setTimeout(u,500)}for(var p=Object.keys(c),g=0;g<p.length;g++)this.options[p[g]]=c[p[g]];n.call(this,e(this.options.theme));var f=t(this.options.org),w=document.querySelectorAll("a.donate");if(w.length)for(var y=0;y<w.length;y++)f.donate&&w[y].setAttribute("href",f.donate),w[y].addEventListener("click",h.bind(this));this.options.uncloseable?document.getElementById("close").classList.add("hidden"):o(),this.options.disableGoogleAnalytics||navigator.doNotTrack||i();var b=document.getElementById("call");return b.addEventListener("submit",function(t){t.preventDefault();var e=document.getElementById("footer");e&&(e.classList.remove("hidden"),e.classList.remove("invisible")),l&&l.classList.remove("hidden"),d&&d.classList.add("hidden");var n=new FormData(b),o=new XMLHttpRequest;r&&(r.addEventListener("transitionend",m.bind(this)),r.classList.remove("hidden"),r.classList.remove("invisible")),a=setTimeout(m.bind(this),500),o.open(b.getAttribute("method"),b.getAttribute("action")+"?ref="+document.referrer,!0),o.send(n)}.bind(this)),this},log:function(){this.options.debug&&console.log.apply(console,arguments)}}};window.addEventListener("message",function(t){if(t.data&&t.data.BFTN_WIDGET_MSG)switch(delete t.data.BFTN_WIDGET_MSG,t.data.requestType){case"putAnimation":c[t.data.modalAnimation].init(t.data)}}),s("getAnimation")}();
//# sourceMappingURL=main.js.map
